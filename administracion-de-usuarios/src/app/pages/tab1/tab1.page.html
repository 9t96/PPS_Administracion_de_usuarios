
<ion-content [fullscreen]="true">

  <ion-row class="ctas" *ngIf="showForm"> 
    <ion-col size="5">
      <div class="img-preview">
        <img [src]="displayImage" alt="" class="round-image" />
      </div>
    </ion-col>
    <ion-col size="5" style="margin-right: 4em;
    margin-top: 3em;"> 
      <button class="btn btn-md take-photo" style="margin-bottom: 1em;" *ngIf="!subioFoto"(click)="TomarImagen()"><ion-icon name="camera-outline"></ion-icon>Tomar foto</button>
    <button class="btn btn-md pick-photo"*ngIf="!subioFoto" (click)="SubirImagen()"><ion-icon name="cloud-upload-outline"></ion-icon> Subir foto</button>
    <button class="btn btn-md delete-photo" style="margin-top:1em" *ngIf="subioFoto" (click)="CambiarImagen()"><ion-icon name="trash-outline"></ion-icon>Eliminar</button>
    </ion-col>
  </ion-row> 
  <form [formGroup]="userForm" novalidate *ngIf="showForm">
    <div class="form-group">
      <label>Nombre</label>
      <input type="text" class="form-control" formControlName="nombre" [(ngModel)]="newUser.nombre"/>
      <div
        *ngIf="userForm.get('nombre').invalid && 
      userForm.get('nombre').errors && 
          (userForm.get('nombre').dirty || userForm.get('nombre').touched)"
      >
        <small
          class="text-danger"
          *ngIf="userForm.get('nombre').hasError('required')"
        >
          Este campo es obligatorio
        </small>
        <small
          class="text-danger"
          *ngIf="userForm.get('nombre').hasError('pattern')"
        >
          Por favor, ingrese un nombre valido.
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>Apellido</label>
      <input type="text" class="form-control" formControlName="apellido" [(ngModel)]="newUser.apellido"/>
      <div
        *ngIf="userForm.get('apellido').invalid && 
    userForm.get('apellido').errors && 
        (userForm.get('apellido').dirty || userForm.get('apellido').touched)"
      >
        <small
          class="text-danger"
          *ngIf="userForm.get('apellido').hasError('required')"
        >
          Este campo es obligatorio
        </small>
        <small
          class="text-danger"
          *ngIf="userForm.get('apellido').hasError('length')"
        >
          Por favor, ingrese un email valido.
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>Documento</label>
      <input type="text" class="form-control" formControlName="documento" [(ngModel)]="newUser.documento"/>
      <div
        *ngIf="userForm.get('documento').invalid && 
    userForm.get('documento').errors && 
        (userForm.get('documento').dirty || userForm.get('documento').touched)"
      >
        <small
          class="text-danger"
          *ngIf="userForm.get('documento').hasError('required')"
        >
          Este campo es obligatorio
        </small>
        <small
          class="text-danger"
          *ngIf="userForm.get('documento').hasError('length')"
        >
          Por favor, ingrese un documento valido.
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>Correo electrónico</label>
      <input type="text" class="form-control" formControlName="email" [(ngModel)]="newUser.email"/>
      <div
        *ngIf="userForm.get('email').invalid && 
    userForm.get('email').errors && 
        (userForm.get('email').dirty || userForm.get('email').touched)"
      >
        <small
          class="text-danger"
          *ngIf="userForm.get('email').hasError('required')"
        >
          Este campo es obligatorio
        </small>
        <small
          class="text-danger"
          *ngIf="userForm.get('email').hasError('email')"
        >
          Por favor, ingrese un correo valido.
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>Contraseña</label>
      <input type="password" class="form-control" formControlName="password" [(ngModel)]="newUser.password"/>
      <div
        *ngIf="userForm.get('password').invalid && 
    userForm.get('password').errors && 
        (userForm.get('password').dirty || userForm.get('password').touched)"
      >
        <small
          class="text-danger"
          *ngIf="userForm.get('password').hasError('required')"
        >
          Este campo es obligatorio
        </small>
        <small
          class="text-danger"
          *ngIf="userForm.get('password').hasError('length')"
        >
          Por favor, ingrese un email valido.
        </small>
      </div>
    </div>

    <div class="form-group">
      <label>Confirmar contraseña</label>
      <input
        type="password"
        class="form-control"
        formControlName="passwordconfirm"
      />
      <div
        *ngIf="userForm.get('passwordconfirm').invalid && 
    userForm.get('passwordconfirm').errors && 
        (userForm.get('passwordconfirm').dirty || userForm.get('passwordconfirm').touched)"
      >
        <small
          class="text-danger"
          *ngIf="userForm.get('passwordconfirm').hasError('required')"
        >
          Este campo es obligatorio
        </small>
        <small
          class="text-danger"
          *ngIf="userForm.get('passwordconfirm').hasError('confirmedValidator')"
        >
          Las contraseñas no coinciden
        </small>
      </div>
    </div>

    <ion-row class="form-submit" style="margin-bottom: 2em;">
      <button class="btn btn-lg btn-warning btn-block" (click)="ReadQrCode()">
        Escanear DNI
      </button>
      <button type="submit" class="btn btn-lg btn-success btn-block" (click)="GuardarUsuario()">Guardar</button>
    </ion-row>
  </form>
  <img *ngIf="showSpinner" src="../../../assets/3dgifmaker21010.gif" alt="" class="spinner">
  <div class="ok-message" *ngIf="showSuccess" style="    display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 50%;">
    <img src="../../../assets/okay.svg" alt="" style="height: 10em;">
    <h1>¡El usuario se guardo con exito!</h1>
  </div>
</ion-content>
<ion-fab horizontal="end" vertical="start" style="margin-top:1em">
  <ion-fab-button (click)="LogOut()"><ion-icon name="log-out-outline"></ion-icon></ion-fab-button>
</ion-fab>

